# 現在発生している問題
DxLibProjectTemp.cppにおいてキー入力に応じてバーの移動を行うコードが存在する。  
現在これはif文の羅列によって実現されている。  

しかしこの方式でif文を増やしていくとゲームのメインループ内の行数が多くなり可読性が低下する恐れが考えられる。  
そこで以下のリファクタリング案を提案する。  
# UML
eventOccurCheckAndExecuteクラスを作成する。  
詳細は以下のUML図に示すが、このクラスは以下の動作を行う。  
- 監視イベントの追加削除
- イベント発生チェック関数の呼び出しとイベント実行関数の呼び出し
```plantuml
class eventOccurCheckAndExecute{

}
interface eventOccurCheckClassInterface{

}
interface eventExecuteClassInterface{

}
class eventOccurCheck1{

}
class eventOccurCheck2{

}
class eventExecute1{

}
class eventExecute2{

}

eventOccurCheckClassInterface <|.. eventOccurCheck1
eventOccurCheckClassInterface <|.. eventOccurCheck2

eventExecuteClassInterface <|.. eventExecute1
eventExecuteClassInterface <|.. eventExecute2

eventOccurCheckAndExecute --> eventOccurCheck1
eventOccurCheckAndExecute --> eventOccurCheck2
eventOccurCheckAndExecute --> eventExecute1
eventOccurCheckAndExecute --> eventExecute2
```
一応実装上は上のようになっているが、見かけ上は下のようになっている。  
```plantuml
class eventOccurCheckAndExecute{

}
interface eventOccurCheckClassInterface{

}
interface eventExecuteClassInterface{

}
class eventOccurCheck1{

}
class eventOccurCheck2{

}
class eventExecute1{

}
class eventExecute2{

}

eventOccurCheckClassInterface <|.. eventOccurCheck1
eventOccurCheckClassInterface <|.. eventOccurCheck2

eventExecuteClassInterface <|.. eventExecute1
eventExecuteClassInterface <|.. eventExecute2

eventOccurCheckAndExecute --> eventOccurCheckClassInterface
eventOccurCheckAndExecute --> eventExecuteClassInterface
```
この方式であれば、いくらイベントのクラスの数が増えてもeventOccurCheckAndExecuteクラスが関連を持っているクラスは(見かけ上)2つに抑えることが出来る。  

```plantuml
main->eventOccurCheckAndExecute:イベント関数生成

activate eventOccurCheckAndExecute
eventOccurCheckAndExecute-->main
main->eventOccurCheck1:eventOccurCheck1生成
activate eventOccurCheck1
eventOccurCheck1-->main:

main->eventOccurCheck2:eventOccurCheck2生成
activate eventOccurCheck2
eventOccurCheck2-->main:

main->eventOccurCheckAndExecute:eventOccurCheck1を渡す

eventOccurCheckAndExecute->eventOccurCheckAndExecute:eventOccurCheck1をスタック等に格納
eventOccurCheckAndExecute-->main
main->eventOccurCheckAndExecute:eventOccurCheck2を渡す

eventOccurCheckAndExecute->eventOccurCheckAndExecute:eventOccurCheck2をスタック等に格納
eventOccurCheckAndExecute-->main
main->main:画面更新処理
main->eventOccurCheckAndExecute:イベントチェックを指示

eventOccurCheckAndExecute->eventOccurCheck1:イベントチェック関数呼び出し

eventOccurCheck1->eventExecute1:eventExecute1生成
activate eventExecute1
eventExecute1-->eventOccurCheck1
eventOccurCheck1-->eventOccurCheckAndExecute:eventOccurCheck1が発生させるイベント

eventOccurCheckAndExecute->eventOccurCheckAndExecute:発生イベントをスタックに格納

eventOccurCheckAndExecute->eventOccurCheck2:イベントチェック関数呼び出し

eventOccurCheck2->eventExecute2:eventExecute2生成
activate eventExecute2
eventExecute2-->eventOccurCheck2
eventOccurCheck2-->eventOccurCheckAndExecute:eventOccurCheck2が発生させるイベント

eventOccurCheckAndExecute->eventOccurCheckAndExecute:発生イベントをスタックに格納
eventOccurCheckAndExecute-->main:発生イベントを返す
main->eventOccurCheckAndExecute:発生イベントの実行

eventOccurCheckAndExecute->eventExecute1:イベント実行
eventExecute1-->eventOccurCheckAndExecute

eventOccurCheckAndExecute->eventExecute2:イベント実行
eventExecute2-->eventOccurCheckAndExecute
deactivate eventExecute1
deactivate eventExecute2
eventOccurCheckAndExecute-->main

```